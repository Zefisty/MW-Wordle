<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modern Warships Wordle</title>
<style>
body{
  background:#0b1a2a;
  color:white;
  font-family:Arial,sans-serif;
  text-align:center;
  padding:20px;
  margin:0;
}

.top{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}
.box{
  background:#1b2b3a;
  border:1px solid #555;
  padding:8px 12px;
  border-radius:6px;
  font-size:16px;
}
.lang button{
  background:none;
  border:none;
  color:white;
  cursor:pointer;
  padding:4px 8px;
  font-size:14px;
}
.lang button.active{
  background:#3a7bd5;
  border-radius:4px;
}

h1{margin:10px 0 14px;font-size:26px}
#timer{font-size:28px;font-weight:bold;margin-bottom:16px;}

button{
  cursor:pointer;
  border:none;
  border-radius:6px;
  font-size:18px;
  padding:10px 18px;
  background:#3a7bd5;
  color:white;
}

#hintBtn{margin-bottom:12px;}
#surrender, #playAgain{margin-top:12px;}

.hints{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-bottom:16px;
}
.hint-square{
  width:90px;
  height:90px;
  border-radius:8px;
  background:#1b2b3a;
  border:1px solid #555;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:16px;
  flex-direction:column;
  transition:0.5s;
}
.hint-square.used{
  background:#6aaa64;
  color:white;
}

.input-container{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:8px;
  margin-bottom:16px;
}
input{
  width:220px;
  padding:12px;
  font-size:16px;
  background:#1b2b3a;
  color:white;
  border:2px solid #555;
  border-radius:6px;
}
#guessBtn{
  background:#3a7bd5;
  color:white;
  border:none;
  padding:12px 18px;
  font-size:16px;
  border-radius:6px;
}

.auto{
  position:absolute;
  background:#1b2b3a;
  border:1px solid #555;
  display:none;
  z-index:5;
  border-radius:6px;
  text-align:left;
}
.auto div{
  padding:8px;
  cursor:pointer;
}
.auto div:hover{background:#3a7bd5}

.board{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
  margin-top:14px;
}
.grid{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-bottom:12px;
}
.square{
  width:90px;
  height:90px;
  border-radius:8px;
  font-size:16px;
  font-weight:bold;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:4px;
  word-break:break-word;
  border:1px solid #555;
  opacity:0;
  transform:scale(0.85);
  animation:reveal .35s ease forwards;
}
.label{ background:#1b2b3a; }
.green{background:#6aaa64;color:white;}
.red{background:#d9534f;color:white;}
.orange{background:#f0ad4e;color:white;}
.col{ display:flex; flex-direction:column; align-items:center; gap:3px; }

@keyframes reveal{
  to{opacity:1; transform:scale(1);}
}
</style>
</head>
<body>

<div class="top">
  <div class="box" id="streak"></div>
  <div class="box lang">
    <button data-lang="ru" class="active">RU</button>
    <button data-lang="en">EN</button>
  </div>
</div>

<h1 id="title">üö¢ Modern Warships Wordle</h1>
<div id="timer">00:00</div>

<button id="hintBtn">–ü–æ–¥—Å–∫–∞–∑–∫–∞ üí°</button>

<div class="hints">
  <div class="hint-square" data-index="0">üí°</div>
  <div class="hint-square" data-index="1">üí°</div>
  <div class="hint-square" data-index="2">üí°</div>
</div>

<div class="input-container">
  <input id="guessInput" autocomplete="off">
  <button id="guessBtn">–£–≥–∞–¥–∞—Ç—å</button>
</div>
<div id="auto" class="auto"></div>

<div id="attempts"></div>

<div class="board">
  <div id="labels" class="grid"></div>
  <div id="history"></div>
</div>

<button id="surrender">–°–¥–∞—Ç—å—Å—è</button>
<button id="playAgain">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>

<script>
const T={
ru:{
  labels:["–°—Ç—Ä–∞–Ω–∞","–¢–∏—Ä","–†–µ–¥–∫–æ—Å—Ç—å","–ö–ª–∞—Å—Å","–ì–æ–¥","–í–æ–¥–æ–∏–∑–º–µ—â–µ–Ω–∏–µ","–î–ª–∏–Ω–∞","–®–∏—Ä–∏–Ω–∞"],
  guess:"–£–≥–∞–¥–∞—Ç—å", again:"–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞", attempts:"–ü–æ–ø—ã—Ç–æ–∫ –æ—Å—Ç–∞–ª–æ—Å—å",
  win:"üéâ –¢—ã —É–≥–∞–¥–∞–ª –∑–∞", lose:"‚õî –ö–æ—Ä–∞–±–ª—å –±—ã–ª",
  hints:["–¢–∏—Ä","–†–µ–¥–∫–æ—Å—Ç—å","–ö–ª–∞—Å—Å"], hintBtn:"–ü–æ–¥—Å–∫–∞–∑–∫–∞ üí°",
  streak:"üî• –°–µ—Ä–∏—è", surrender:"–°–¥–∞—Ç—å—Å—è"
},
en:{
  labels:["Country","Tier","Rarity","Class","Year","Displacement","Length","Width"],
  guess:"Guess", again:"Play again", attempts:"Attempts left",
  win:"üéâ You guessed in", lose:"‚õî Ship was",
  hints:["Tier","Rarity","Class"], hintBtn:"Hint üí°",
  streak:"üî• Streak", surrender:"Surrender"
}
};

const ships=[
{name:"Zumwalt",country:{ru:"–°–®–ê",en:"USA"},tier:10,rarity:{ru:"–≠–ø–∏—á–µ—Å–∫–∞—è",en:"Epic"},class:{ru:"–≠—Å–º–∏–Ω–µ—Ü",en:"Destroyer"},year:2013,displacement:15000,length:190,width:24},
{name:"Gorshkov",country:{ru:"–†–æ—Å—Å–∏—è",en:"Russia"},tier:9,rarity:{ru:"–†–µ–¥–∫–∞—è",en:"Rare"},class:{ru:"–§—Ä–µ–≥–∞—Ç",en:"Frigate"},year:2018,displacement:14000,length:186,width:24},
{name:"Yamato",country:{ru:"–Ø–ø–æ–Ω–∏—è",en:"Japan"},tier:10,rarity:{ru:"–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è",en:"Legendary"},class:{ru:"–õ–∏–Ω–∫–æ—Ä",en:"Battleship"},year:1941,displacement:72000,length:263,width:38}
];

let lang="ru";
let secret, attempts=6, guesses=[], hintCount=0;
let streak=Number(localStorage.getItem("streak")||0);
let startTime=null, timerInt=null;
const $=id=>document.getElementById(id);

function fmt(ms){ const s=Math.floor(ms/1000); return String(Math.floor(s/60)).padStart(2,"0")+":"+String(s%60).padStart(2,"0"); }

function render(){
  $("labels").innerHTML="";
  T[lang].labels.forEach(l=>{
    const d=document.createElement("div");
    d.className="square label";
    d.textContent=l;
    $("labels").appendChild(d);
  });
  $("attempts").textContent=T[lang].attempts+": "+attempts;
  $("guessBtn").textContent=T[lang].guess;
  $("hintBtn").textContent=T[lang].hintBtn;
  $("streak").textContent=T[lang].streak+": "+streak;
  $("surrender").textContent=T[lang].surrender;
  $("playAgain").textContent=T[lang].again;

  // History with animation
  $("history").innerHTML="";
  guesses.forEach(ship=>{
    const row=document.createElement("div"); row.className="grid";
    [
      cmp(ship.country[lang],secret.country[lang]),
      cmp(ship.tier,secret.tier,true),
      cmp(ship.rarity[lang],secret.rarity[lang]),
      cmp(ship.class[lang],secret.class[lang]),
      cmp(ship.year,secret.year,true),
      cmp(ship.displacement,secret.displacement,true),
      cmp(ship.length,secret.length,true),
      cmp(ship.width,secret.width,true)
    ].forEach((c,i)=>{
      const col=document.createElement("div"); col.className="col";
      col.innerHTML=`<div class="square ${c.col}" style="animation-delay:${i*150}ms">${c.v} ${c.i}</div>`; 
      row.appendChild(col);
    });
    $("history").appendChild(row);
  });
  const keys=["tier","rarity","class"];
document.querySelectorAll(".hint-square").forEach((sq,i)=>{
  if(i<hintCount){
    let value;
    if(keys[i]==="tier") value = secret.tier; // —á–∏—Å–ª–æ–≤–æ–µ –ø–æ–ª–µ
    else value = secret[keys[i]][lang];      // –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–µ –ø–æ–ª—è
    sq.textContent=T[lang].hints[i]+": "+value;
    sq.classList.add("used");
  } else {
    sq.textContent="üí°"; 
    sq.classList.remove("used");
  }
});
}

function cmp(v,c,num=false){ let col="red",i="‚ùå"; if(v===c){col="green";i="‚úÖ";} else if(num){col="orange";i=v>c?"‚¨áÔ∏è":"‚¨ÜÔ∏è";} return {v,col,i}; }

function startTimer(){ if(startTime)return; startTime=Date.now(); timerInt=setInterval(()=>{$("timer").textContent=fmt(Date.now()-startTime)},1000); }
function stopTimer(){clearInterval(timerInt);}

$("guessBtn").onclick=()=>{
  if(attempts<=0)return;
  startTimer(); $("surrender").style.display="inline-block";
  const name=$("guessInput").value.trim().toLowerCase();
  const ship=ships.find(s=>s.name.toLowerCase()===name); if(!ship)return;
  attempts--; guesses.push(ship); $("guessInput").value=""; $("auto").style.display="none";

  if(ship.name===secret.name){
    stopTimer(); const t=Date.now()-startTime; alert(T[lang].win+" "+fmt(t));
    streak++; localStorage.setItem("streak",streak);
    $("playAgain").style.display="inline-block"; $("surrender").style.display="none"; attempts=0;
  } else if(attempts===0){
    stopTimer(); alert(T[lang].lose+" "+secret.name);
    streak=0; localStorage.setItem("streak",0);
    $("playAgain").style.display="inline-block"; $("surrender").style.display="none";
  }
  render();
};

$("hintBtn").onclick=()=>{
  if(hintCount>=3) return;
  hintCount++; render();
};

$("surrender").onclick=()=>{
  stopTimer(); alert(T[lang].lose+" "+secret.name);
  streak=0; localStorage.setItem("streak",0);
  $("playAgain").style.display="inline-block"; $("surrender").style.display="none"; attempts=0;
  render();
};

$("guessInput").oninput=()=>{
  const v=$("guessInput").value.toLowerCase(); $("auto").innerHTML="";
  if(!v){$("auto").style.display="none";return;}
  ships.filter(s=>s.name.toLowerCase().startsWith(v)).forEach(s=>{
    const d=document.createElement("div"); d.textContent=s.name;
    d.onclick=()=>{$("guessInput").value=s.name;$("auto").style.display="none";}
    $("auto").appendChild(d);
  });
  if($("auto").children.length){
    $("auto").style.display="block";
    const rect=$("guessInput").getBoundingClientRect();
    $("auto").style.top=(rect.bottom+4+window.scrollY)+"px";
    $("auto").style.left=(rect.left+window.scrollX)+"px";
    $("auto").style.width=rect.width+"px";
  } else $("auto").style.display="none";
};

document.querySelectorAll(".lang button").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll(".lang button").forEach(x=>x.classList.remove("active"));
    b.classList.add("active"); lang=b.dataset.lang; render();
  };
});

$("playAgain").onclick=start;
function start(){
  secret=ships[Math.floor(Math.random()*ships.length)];
  attempts=6; guesses=[]; hintCount=0;
  $("playAgain").style.display="none"; $("surrender").style.display="none";
  startTime=null; stopTimer();
  $("timer").textContent="00:00";
  render();
}

start();
</script>
</body>
</html>
